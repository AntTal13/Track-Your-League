<%- include('../partials/header') %>

<h2>
<section id="show-page">
    <div><%= team.name %></div>
</section>
</h2>

<br>
<h2>Players</h2>
<% if (team) { %>
    <table>
      <thead>
        <tr>
          <th>Player</th>
          <th>PPG</th>
          <th>APG</th>
          <th>RPG</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
            <td>
            <%- team.players.map(p => 
                `<ul>${p.name}</ul>`
                ).join('') %>
            </td>
        </tr>
      </tbody>
      <td colspan="4"></td>
    </section>
        <form id="add-player-to-roster" action="/teams/<%= team._id %>/players" method="POST">
        <select name="playerId">
        <%- players.map(p => 
        `<option value="${p._id}">${p.name}</option>`
        ).join('') %>
        </select>
        <br>
        <button type="submit">Add to Roster</button>
        <br>
        </form>
<% } %>

    <form action="/teams/<%= team._id %>?_method=DELETE" method="POST">
      <button type="submit">Delete Team</button>
    </form>

  
<!-- <% team.players.forEach(function(r) { %>
    <% if (user?._id.equals(r.user)) { %>
      <form action="/players/<%= r._id %>?_method=DELETE" method="POST">
        <button type="submit">X</button>
      </form>
    <% } %>
<% }); %> -->


<%- include('../partials/footer') %>
