<%- include('../partials/header') %>

<h2>
<section id="show-page">
    <div><%= team.name %></div>
  </h2>
  
  <% if (user?._id.equals(team.user)) { %>
    <form action="/teams/<%= team._id %>?_method=DELETE" method="POST">
      <button id="delete-button" type="submit">Delete Team</button>
    </form>
    <% } %>
</section>
    
<br><br>

<% if (team) { %>
    <table id="player-table">
      <thead id="player-header">
        <tr>
          <th>Current Roster</th>
        </tr>
      </thead>
      <tbody id="player-body">
        <tr>
            <td id="testing">
            <%- team.players.map(p => 
                `<ul><li>${p.name}</li></ul>`
                ).join('') %>
            </td>
        </tr>
      </tbody>
    </table>

    <br><br>

    <h2>Add A Player</h3>
      <form id="add-player-to-roster" action="/teams/<%= team._id %>/players" method="POST">
        <select name="playerId">
        <%- players.map(p => 
        `<option value="${p._id}">${p.name}</option>`
        ).join('') %>
        </select>
        <br><br>
        <button id="add-button" type="submit">Add to Roster</button>
      </form>
<% } %>


<%- include('../partials/footer') %>
